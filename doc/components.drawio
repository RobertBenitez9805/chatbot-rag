<mxfile host="app.diagrams.net" modified="2026-02-23T00:00:00.000Z" agent="Claude" version="24.0.0" type="device">
  <diagram id="rag-architecture" name="RAG Architecture">
    <mxGraphModel dx="1422" dy="762" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Promtior RAG Chatbot - Component Diagram" style="text;html=1;fontSize=18;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="250" y="20" width="500" height="40" as="geometry" />
        </mxCell>

        <!-- User Browser -->
        <mxCell id="user" value="User Browser" style="shape=mxgraph.basic.rect;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="80" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- Frontend -->
        <mxCell id="frontend" value="Chat UI&#xa;(static/index.html)&#xa;HTML / CSS / JS" style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="370" y="180" width="200" height="70" as="geometry" />
        </mxCell>

        <!-- Arrow: User -> Frontend -->
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;" edge="1" source="user" target="frontend" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- FastAPI + LangServe -->
        <mxCell id="langserve" value="FastAPI + LangServe&#xa;(app/server.py)&#xa;&#xa;POST /chat/invoke&#xa;POST /chat/stream&#xa;GET /chat/playground" style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="340" y="300" width="260" height="100" as="geometry" />
        </mxCell>

        <!-- Arrow: Frontend -> LangServe -->
        <mxCell id="e2" value="HTTP POST&#xa;{&quot;input&quot;: &quot;question&quot;}" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;fontSize=10;" edge="1" source="frontend" target="langserve" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- RAG Chain -->
        <mxCell id="chain" value="RAG Chain (LCEL)&#xa;(app/chain.py)&#xa;&#xa;RunnableParallel → Prompt → LLM → OutputParser" style="rounded=1;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="310" y="450" width="320" height="80" as="geometry" />
        </mxCell>

        <!-- Arrow: LangServe -> Chain -->
        <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;" edge="1" source="langserve" target="chain" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- FAISS Retriever -->
        <mxCell id="faiss" value="FAISS Vector Store&#xa;(vectorstore/)&#xa;&#xa;Similarity Search&#xa;k=3 nearest chunks" style="shape=cylinder3;whiteSpace=wrap;boundedLbl=1;backgroundOutline=1;size=12;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="120" y="580" width="200" height="110" as="geometry" />
        </mxCell>

        <!-- ChatOpenAI LLM -->
        <mxCell id="llm" value="ChatOpenAI&#xa;gpt-3.5-turbo&#xa;temperature=0" style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=center;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="600" width="160" height="70" as="geometry" />
        </mxCell>

        <!-- Arrow: Chain -> FAISS -->
        <mxCell id="e4" value="1. Retrieve&#xa;relevant chunks" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;fontSize=10;" edge="1" source="chain" target="faiss" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrow: Chain -> LLM -->
        <mxCell id="e5" value="2. Generate&#xa;response" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;fontSize=10;" edge="1" source="chain" target="llm" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Ingestion Pipeline -->
        <mxCell id="ingest" value="Ingestion Pipeline&#xa;(app/ingest.py)&#xa;&#xa;WebBaseLoader → TextSplitter → Embeddings → FAISS" style="rounded=1;whiteSpace=wrap;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;align=center;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="750" width="340" height="70" as="geometry" />
        </mxCell>

        <!-- Arrow: Ingest -> FAISS -->
        <mxCell id="e6" value="Builds index" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;dashed=1;fontSize=10;" edge="1" source="ingest" target="faiss" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- OpenAI API -->
        <mxCell id="openai" value="OpenAI API&#xa;&#xa;• text-embedding-3-small&#xa;• gpt-3.5-turbo" style="shape=cloud;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="570" y="750" width="220" height="110" as="geometry" />
        </mxCell>

        <!-- Arrow: LLM -> OpenAI -->
        <mxCell id="e7" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;dashed=1;" edge="1" source="llm" target="openai" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrow: Ingest -> OpenAI -->
        <mxCell id="e8" value="Embeddings" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;dashed=1;fontSize=10;" edge="1" source="ingest" target="openai" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Promtior Website -->
        <mxCell id="web" value="promtior.ai&#xa;(Knowledge Source)" style="shape=cloud;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="60" y="870" width="200" height="90" as="geometry" />
        </mxCell>

        <!-- Arrow: Web -> Ingest -->
        <mxCell id="e9" value="WebBaseLoader" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;dashed=1;fontSize=10;" edge="1" source="web" target="ingest" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Prompt Template box -->
        <mxCell id="prompt" value="Prompt Template&#xa;&quot;Answer based only&#xa;on the context...&quot;" style="shape=note;whiteSpace=wrap;size=14;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="420" y="590" width="140" height="80" as="geometry" />
        </mxCell>

        <!-- Arrow: FAISS -> Prompt (context) -->
        <mxCell id="e10" value="context" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;fontSize=10;dashed=1;" edge="1" source="faiss" target="prompt" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrow: Prompt -> LLM -->
        <mxCell id="e11" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;dashed=1;" edge="1" source="prompt" target="llm" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
